<!DOCTYPE html>
<html lang="en-US">
<head>
	<!-- SITE MON : START (DO NOT DELETE) -->
	<!-- developerWorks monitoring token -->
	<!-- SITE MON : END (DO NOT DELETE) -->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- v18 meta -->
	<meta name="geo.country" content="ZZ" />
	<meta name="dcterms.rights" content="© Copyright IBM Corp. 2016" />
	<meta name="dcterms.date" content="2016-07-18" />
	<meta name="keywords" content="" />
	<meta name="robots" content="index, follow" />
	<link rel="shortcut icon" href="https://www.ibm.com/favicon.ico" />

		<!-- end of v18 meta -->

<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="https://developer.ibm.com/wasdev/xmlrpc.php">
<script>
		 digitalData = {
		  "page":{
		    "category":{
		      "primaryCategory":"SOFDCWSVZZ",		      "ibm":[

		      ]
		    },
		    "pageInfo":{
		      "effectiveDate":"2016-07-18",
		      "expiryDate":"2020-07-18",
		      "language":"en-US",
		      "publishDate":"2015-11-04",
		      "publisher":"IBM Corporation",
		      "version":"v18",
		      "pageID":"",
		      "ibm":{
						"contentDelivery":"HTML",
		        "contentProducer":"IBM Northstar Template Generator 2.0",
		        "country":"ZZ",
		        "industry":"ZZ",
		        "owner":"Jamie Pickett\/Boulder\/IBM",
		        "siteID":"DWNEXT",
						"subject":"SW700",
		        "type":"SW700",
		        "cmClientID":"50200000| DWNEXT",
		        "encoding":"utf8",
		        "encodingRaw":"utf-8",
		        "title":"Using API keys to secure your microservice",
						"contentType": "doc",
						"wpid":"9",
						"topics":"",
						"contentArea": "Security"
		      },
		      "metrics":[

		      ],
		      "keywords":"",
		      "description":"Using API keys to secure your microservice"
		    },
		    "attributes":[

		    ],
		  },
		  "event_coordinator":[

		  ],
		  "isLoaded":true,
		  "user":{
		    "profile":[

		    ],
		    "segment":{

		    }
		  }
		};
	 </script>
<title>Using API keys to secure your microservice - WASdev</title>

<!-- This site is optimized with the Yoast SEO plugin v9.0.2 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="Using API keys to identify the service making the call, authenticating the service making the call, and checking that data received has not been changed."/>
<link rel="canonical" href="../../index.html%3Fp=14793.html" />
<link rel="publisher" href="https://plus.google.com/u/0/+WASdevNet"/>
<!-- / Yoast SEO plugin. -->

<link rel='dns-prefetch' href='https://1.www.s81c.com/' />
<link rel='dns-prefetch' href='https://www.ibm.com/' />
<link rel='dns-prefetch' href='https://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="WASdev &raquo; Feed" href="../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="WASdev &raquo; Comments Feed" href="../../comments/feed/index.html" />
<meta name="segment" property="developerWorks (developerWorks)" productTitle="developerWorks" value="WASdev (developerWorks)">
<link rel="alternate" type="application/rss+xml" title="WASdev &raquo; Using API keys to secure your microservice Comments Feed" href="feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"\/\/dw1.s81c.com\/dw\/wp-includes\/js\/wp-emoji-release.min.js"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='events-manager-css'  href='../../wp-content/plugins/events-manager/includes/css/events_manager.css' type='text/css' media='all' />
<link rel='stylesheet' id='tab-styles-css'  href='../../wp-content/plugins/projectnext-shortcodes/tab-styles.css' type='text/css' media='all' />
<link rel='stylesheet' id='cntctfrm_form_style-css'  href='../../wp-content/plugins/contact-form-plugin/css/form_style.css' type='text/css' media='all' />
<link rel='stylesheet' id='rotatingtweets-css'  href='../../wp-content/plugins/rotatingtweets/css/style.css' type='text/css' media='all' />
<link rel='stylesheet' id='dwboomer-style-css'  href='../../wp-content/themes/boomer-v18/style.css' type='text/css' media='all' />
<link rel='stylesheet' id='dashicons-css'  href='../../wp-includes/css/dashicons.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='pagepost_css-css'  href='../../wp-content/themes/boomer-v18/css/pagepost.css' type='text/css' media='all' />
<link rel='stylesheet' id='pnext.utils-css'  href='../../wp-content/themes/boomer-v18/css/pnext.utils.css' type='text/css' media='all' />
<link rel='stylesheet' id='uploaded_css-css'  href='../../wp-content/uploads/sites/9/2015/03/wasdev.css' type='text/css' media='screen' />
<script type='text/javascript' src='https://1.www.s81c.com/common/v18/js/www.js'></script>
<script type='text/javascript' src='https://1.www.s81c.com/common/v18/js/dyntabs.js'></script>
<script type='text/javascript' src='https://1.www.s81c.com/common/v18/js/masonry.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/core.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/widget.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/position.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/mouse.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/sortable.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/datepicker.min.js'></script>
<script type='text/javascript'>
jQuery(document).ready(function(jQuery){jQuery.datepicker.setDefaults({"closeText":"Close","currentText":"Today","monthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"nextText":"Next","prevText":"Previous","dayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dayNamesShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dayNamesMin":["S","M","T","W","T","F","S"],"dateFormat":"MM d, yy","firstDay":1,"isRTL":false});});
</script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/menu.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/wp-a11y.min.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var uiAutocompleteL10n = {"noResults":"No results found.","oneResult":"1 result found. Use up and down arrow keys to navigate.","manyResults":"%d results found. Use up and down arrow keys to navigate.","itemSelected":"Item selected."};
/* ]]> */
</script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/autocomplete.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/resizable.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/draggable.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/button.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/dialog.min.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var EM = {"ajaxurl":"https:\/\/developer.ibm.com\/wasdev\/wp-admin\/admin-ajax.php","locationajaxurl":"https:\/\/developer.ibm.com\/wasdev\/wp-admin\/admin-ajax.php?action=locations_search","firstDay":"1","locale":"en","dateFormat":"dd\/mm\/yy","ui_css":"https:\/\/developer.ibm.com\/wasdev\/wp-content\/plugins\/events-manager\/includes\/css\/jquery-ui.min.css","show24hours":"1","is_ssl":"1","txt_search":"Search","txt_searching":"Searching...","txt_loading":"Loading..."};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/plugins/events-manager/includes/js/events-manager.js'></script>
<script type='text/javascript' src='../../wp-content/plugins/projectnext-shortcodes/tab-dropdown.js'></script>
<script type='text/javascript' src='../../wp-content/themes/boomer-v18/js/pnext.utils.js'></script>
<script type='text/javascript' src='https://1.www.s81c.com/common/stats/ida_stats.js'></script>
<link rel='https://api.w.org/' href='../../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://developer.ibm.com/wasdev/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.9.9" />
<link rel='shortlink' href='../../index.html%3Fp=14793.html' />
<link rel="alternate" type="application/json+oembed" href="https://developer.ibm.com/wasdev/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdeveloper.ibm.com%2Fwasdev%2Fdocs%2Fusing-api-keys-secure-microservice%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://developer.ibm.com/wasdev/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdeveloper.ibm.com%2Fwasdev%2Fdocs%2Fusing-api-keys-secure-microservice%2F&#038;format=xml" />
<link rel='https://github.com/WP-API/WP-API' href='https://developer.ibm.com/wasdev/wp-json' />
<style type="text/css" id="syntaxhighlighteranchor"></style>
		<style type="text/css" id="wp-custom-css">
			.videoWrapper {
	position: relative;
	padding-bottom: 56.25%;
/* 16:9 */
	padding-top: 25px;
	height: 0;
}

.videoWrapper iframe {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}

.pnpagepost  .pn-listing .pn-list__item .entry-content .entry-meta .byline br {
	display: none;
}

/*Adds border to any screenshot with this class applied. Looks neater and clearer.*/
img.screenshot {
	border: 1px solid #afafaf;
}

/*Adds border to any photo with this class applied. Looks neater and clearer.*/
img.photo {
	border: 1px solid #afafaf;
}

/*Nests ordered lists correctly.*/
ol>li ol>li::before {
	content: counter(item, lower-alpha)".";
}

ol>li ol>li ol>li::before {
	content: counter(item, lower-roman)".";
}

/* hiding the doubled up author images */
.pn-listing .pn-list__item .byline .avatar {
	display: none !important;
}

/* removing bullets from the EM widget */
.widget-area .widget.widget_em_widget ul li:before,
.widget-area .widget.widget_text ul li:before{display:none;}

/*push anchored h2 headings down from browser top so they're not hidden behind the static headers
h2:before { 
  display: block; 
  content: " "; 
  margin-top: -300px; 
  height: 300px; 
  visibility: hidden; 
}*/

h2 { padding-top: 30px !important; }
		</style>
	
    <link href="https://1.www.s81c.com/common/v18/css/www.css" rel="stylesheet" />
    <link href="https://1.www.s81c.com/common/v18/css/grid-fluid.css" rel="stylesheet">
    <link href="https://1.www.s81c.com/common/v18/css/tables.css" rel="stylesheet">

	<script type="text/javascript">
		 IBMCore.common.util.config.set({
		  "masthead":{
		    "type":"alternate"
		  },
			greeting: { enabled: false },
		  "footer":{
		  	"type":"alternate",
		    "socialLinks":{
		      "enabled":false
		    }
		  },
			survey: { global_percent: 0 }
		});
	 </script>
</head>

<body id="ibm-com" class="doc-template-default single single-doc postid-14793 ibm-com ibm-type group-blog">
	<div style="display:none"></div>
<!--div id="page" class="site"-->
<div id="ibm-top" class="ibm-landing-page">
	<a class="skip-link screen-reader-text" href="../../index.html%3Fp=14793.html#main">Skip to content</a>

	<!-- MASTHEAD_BEGIN -->
	<div id="ibm-masthead" role="banner" aria-label="IBM" class="ibm-mhtype-minimal">
		<div id="ibm-mast-options">
			<ul role="toolbar" aria-labelledby="ibm-masthead">
				<li id="ibm-geo" role="presentation">
					<a href="http://www.ibm.com/planetwide/select/selector.html">United States</a>
				</li>
			</ul>
		</div>
		<div id="ibm-universal-nav">
			<div id="ibm-home">
				<a href="http://www.ibm.com/us-en/">IBM¨</a>
			</div>
			<div class="dw-nav-left">
				<a href="http://developer.ibm.com" class="dw-logo"><span>IBM Developer</span></a>
							</div>
			<ul id="ibm-menu-links" role="toolbar" aria-label="Site map" class="ibm-hide">
				<li><a href="http://www.ibm.com/sitemap/us/en/">Site map</a></li>
			</ul>
			<div id="ibm-search-module" role="search" aria-labelledby="ibm-masthead">
				<!-- form id="ibm-search-form" action="http://www.ibm.com/Search/" method="get" -->
				<form id="ibm-search-form" action="https://www.ibm.com/Search/" method="get">
					<p>
						<label for="q"><span class="ibm-access">Search</span></label>
						<input type="text" maxlength="100" value="" name="q" id="q"/>
						<input type="hidden" name="v" value="18" />
						<input type="hidden" name="en" value="utf" />
						<input type="hidden" name="lang" value="en" />
						<input type="hidden" name="cc" value="us" />
						<input type="hidden" name="sn" value="dw" />
						<input type="hidden" name="dw" value="dws" />

						<span class="ibm-search-scope">
							<input type="checkbox" class="ibm-styled-checkbox" name="sn" value="Search standards" checked id="scopeoption">
							<label for="scopeoption">Search WASdev</label>
						</span>

						<input type="submit" id="ibm-search" class="ibm-btn-search" value="Submit"/>
					</p>
				</form>
									<form class="ibm-hide" id="devcenter-search-form" action="../../index.html%3Fp=719.html" method="get">
						<p>
							<label for="pnext-search-input" class="screen-reader-text">Search</label>
							<input maxlength="100" required aria-required="true" id="q" class="pn-search-input pn-nav-search-input fl" name="q" type="text">
							<input type="submit" id="ibm-search" class="ibm-btn-search" value="Seach"/>
						</p>
					</form>
								</div>
		</div>
	</div>
  <!-- MASTHEAD_END -->
  <div id="ibm-content-wrapper">
  	<header role="banner" aria-labelledby="ibm-pagetitle-h1">
  		<!-- MASTHEAD_SITENAV_BEGIN -->
<div class="ibm-sitenav-menu-container">
  <div class="ibm-sitenav-menu-name">
    <a href="../portlet-container-differences-liberty-full-profile/index.html" rel="home">WASdev</a>
  </div>
    <div class="ibm-sitenav-menu-list"><ul id="primary-menu" class="menu"><li id="menu-item-11996" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11996"><a title="About WebSphere Liberty" href="../introducing_the_liberty_profile/index.html">About</a></li>
<li id="menu-item-12338" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12338"><a href="../../getstarted/index.html">Get Started</a></li>
<li id="menu-item-8368" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8368"><a title="Download Liberty, features, and samples" href="../../downloads/websphere-application-server-migration-tools/index.html">Downloads</a></li>
<li id="menu-item-2816" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2816"><a title="Articles and videos for developers" href="../../docs.html">Docs</a></li>
<li id="menu-item-12458" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12458"><a title="Open source code on Github" href="https://github.com/wasdev">Source Code</a></li>
<li id="menu-item-718" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-718"><a title="All the ways you can get help developing on Liberty" href="../../help.html">Get Help</a></li>
<li id="menu-item-2415" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-2415"><a title="News, events, and opinions on WAS Liberty" href="../../blog.html">News &#038; Events</a></li>
</ul></div></div>
<!-- MASTHEAD_SITENAV_END -->
  	</header>
<style>#ibm-com .gsc-adBlock{display:none !important;}</style>
<div id="content" class="site-content">
<div id="primary" class="content-area ibm-columns pnpagepost">
		<header class="pagepost-entry-header"><div class="pn_categories"><span><b>in </b><a href="../category/security/index.html" rel="tag">Security</a></span></div><h1 class="entry-title">Using API keys to secure your microservice</h1><div class="entry-meta"><div class="pn_byline"><br><span class="author vcard"><a class="url fn n" href="../../blog/author/apilkington/index.html">Adam_P</a></span><br>Published on November 4, 2015<i> / Updated on January 5, 2017</i></div><div class="pn_slic"><a href="../../index.html%3Fp=14793.html#comments" class="pn_comments_icon">1 <i>Comments</i></a></div></div></header>		<section class="ibm-fluid">
			<div class="ibm-col-12-3">
				<nav role="left-nav" id="pnext_cpt_leftnav">
									<div id="ibm-navigation">
										<ul class="doc_categories" id="pnext_cpt_leftnav__links" role="tree" aria-labelledby="ibm-pagetitle-h1">
											<li id="ibm-overview" class="cat-all"><a href="../../docs.html">All Documentation</a><a href="../../index.html%3Fp=14793.html#" class="pnext_cpt_leftnav_expand ibm-chevron-down-link"><i>expand</i></a></li>	<li class="cat-item cat-item-345"><a href="../category/open-liberty/index.html" >Open Liberty <span class="count">(19)</span></a>
</li>
	<li class="cat-item cat-item-333"><a href="../category/knowledge-centers/index.html" >Official documentation <span class="count">(5)</span></a>
</li>
	<li class="cat-item cat-item-84"><a href="../category/installation/index.html" >Installation <span class="count">(9)</span></a>
</li>
	<li class="cat-item cat-item-80"><a href="../category/getting-started/index.html" >Getting started with Liberty <span class="count">(7)</span></a>
</li>
	<li class="cat-item cat-item-88"><a href="../category/migration-articles/index.html" >Migration <span class="count">(3)</span></a>
</li>
	<li class="cat-item cat-item-85"><a href="../category/coding/index.html" >Coding <span class="count">(80)</span></a>
</li>
	<li class="cat-item cat-item-335"><a href="../category/tools/index.html" >Tools <span class="count">(3)</span></a>
</li>
	<li class="cat-item cat-item-212"><a href="../category/java-ee/index.html" >Java EE <span class="count">(53)</span></a>
</li>
	<li class="cat-item cat-item-330"><a href="../category/microprofile/index.html" >MicroProfile <span class="count">(13)</span></a>
</li>
	<li class="cat-item cat-item-210"><a href="../category/osgi-techs/index.html" >OSGi <span class="count">(12)</span></a>
</li>
	<li class="cat-item cat-item-226"><a href="../category/extensions/index.html" >Extending Liberty <span class="count">(6)</span></a>
</li>
	<li class="cat-item cat-item-223"><a href="../category/oss/index.html" >Liberty with open source <span class="count">(15)</span></a>
</li>
	<li class="cat-item cat-item-225"><a href="../category/workflow/index.html" >Setting up your Liberty workflow <span class="count">(6)</span></a>
</li>
	<li class="cat-item cat-item-86"><a href="../category/devops/index.html" >DevOps <span class="count">(57)</span></a>
</li>
	<li class="cat-item cat-item-273"><a href="../category/security/index.html" >Security <span class="count">(10)</span></a>
</li>
	<li class="cat-item cat-item-208"><a href="../category/internet-of-things/index.html" >Internet of Things <span class="count">(6)</span></a>
</li>
	<li class="cat-item cat-item-241"><a href="../category/rtcomm/index.html" >Real-time comms <span class="count">(1)</span></a>
</li>
	<li class="cat-item cat-item-274"><a href="../category/microservices/index.html" >Microservices <span class="count">(3)</span></a>
</li>
	<li class="cat-item cat-item-209"><a href="../category/cloud/index.html" >Cloud <span class="count">(22)</span></a>
</li>
	<li class="cat-item cat-item-126"><a href="../category/labs/index.html" >Labs <span class="count">(2)</span></a>
</li>
	<li class="cat-item cat-item-111"><a href="../category/fun-projects/index.html" >Fun projects <span class="count">(7)</span></a>
</li>
	<li class="cat-item cat-item-82"><a href="../category/videos/index.html" >Videos <span class="count">(25)</span></a>
</li>
	<li class="cat-item cat-item-83"><a href="../category/podcasts/index.html" >Podcasts <span class="count">(1)</span></a>
</li>
	<li class="cat-item cat-item-94"><a href="../category/early-access/index.html" >Early Access <span class="count">(7)</span></a>
</li>
</ul>
									</div>
								</nav>			</div>
			<div class="ibm-col-12-9 entry-content">
				<main id="main" class="site-main" role="main">
														<p class="wasdev-excerpt">Using API keys to identify the service making the call, authenticating the service making the call, and checking that data received has not been changed.</p>
<p>So, you&#8217;ve followed all the talk about microservices and created one, complete with its very own REST API to be invoked by various client applications or, indeed, other services. At this point, however, you start to wonder about security &#8211; surely you don&#8217;t just want anyone calling your service&#8230;?</p>
<h2>Using API keys to authorise and validate calls</h2>
<p>Like a lot of the microservices landscape, there are a number of techniques and practices that can be applied to a given scenario; security is no exception. This article is going to look at how we can use API keys to authorise and validate calls that a service receives. These keys allow us to answer the following important questions:</p>
<ol>
<li>Which service is making the call?</li>
<li>Do I trust the service that is making the call?</li>
<li>Have any of the parameters, or the data, been altered?</li>
</ol>
<p>Because API keys allow you to make sure that data hasn&#8217;t been altered, they can also be used to protect your service from other problems such as replay attacks whereby the same request is sent multiple times.</p>
<p>One important thing to note is that API keys will not help you with authentication; that is, the identity of the user and what they are allowed to do. That is typically handled by other security options such as <a href="https://en.wikipedia.org/wiki/OAuth">Oauth</a> and <a href="https://en.wikipedia.org/wiki/OpenID_Connect">OpenID Connect</a>.</p>
<h2>What makes up an API key then?</h2>
<p>An API key is composed of a number of component parts, each of which represents some data that needs to be sent to your service. Here&#8217;s an example key:</p>
<p><code>[Parameter data] + [service ID] + [time stamp]</code></p>
<p>where:</p>
<ul>
<li><em>Parameter data</em> is the data being sent to your API.</li>
<li><em>Service ID</em> is an identifier that your API will use to recognise the service (remember that this won&#8217;t say who the service is acting on behalf of).</li>
<li><em>Time stamp</em> corresponds to when the request was made.</li>
</ul>
<p>So, this answers question 1 above, we now know which service is making the API call. However, at the moment, any of these items could just be invented by a malicious client and sent to your service. We still need to answer questions 2 and 3 above: do we trust the caller, and has anything been altered?</p>
<h2>Using a hash to secure the microservice</h2>
<p>The way to answer questions 2 and 3 is using something called a <a href="https://en.wikipedia.org/wiki/Hash-based_message_authentication_code">Hash-based Message Authentication Code</a> or HMAC. An HMAC takes some data, creates a hash of it, and then encrypts that hash. What the hash does is ensure that the data used to generate the hash has not been changed; even changing a single byte of the data will cause a different hash to be generated. (This is why you see websites publish a hash alongside a download link to a mirror site as it allows you to check whether or not a change has been made to the file since the creator published it.)</p>
<p>Once we have the hash, it is then encrypted by what is known as a shared secret which is where the encryption and decryption are performed using something that was previously shared between both parties, such as a password.</p>
<p>Now we know how an HMAC works, <em>how</em> does it help us secure our microservice? What we do is generate an HMAC using the values in our API key and then transmit it along with everything else. The receiving service is then able to use the HMAC to authorise the call and validate the parameters. Going back to our questions, both are now answered with the use of a HMAC as follows:</p>
<ul>
<li><em>Do I trust the service that is making the call?</em> The answer is yes because the shared secret is only known by the sender and receiver, no one else knows it, so it must have come from the trusted service.</li>
<li><em>Have any of the parameters, or the data, been altered?</em> No, none have been altered if the hash matches the API key, i.e the data + service ID + time stamp in this example.</li>
</ul>
<h2>Things to consider&#8230;</h2>
<ul>
<li><em>How to share the secret.</em> This is typically done via a second channel. So take GitHub, for example. When you want to authorise an application to access GitHub services, as part of that process you are given a shared secret to use which is specific to your app. Public/private keys obviously solve this problem but require a <a href="https://en.wikipedia.org/wiki/Public_key_infrastructure">public key infrastructure (PKI)</a> to be setup, which means that the shared secret approach offers a lower configuration and maintenance overhead. Having said that, if both the client and server are part of the same PKI then you can use that.</li>
<li><em>How to read the shared secret.</em> Hard-coding the secret into your application needs to be avoided, otherwise it won&#8217;t be stateless, easily deployed into cloud environments, easy to change, or will just be plain visible to someone looking at your code!<br />
Typically the secret is read from environment variables, which has the advantage of working in pretty much all languages (remember that a microservice architecture can be a ployglot one), but needs to be configured to only be visible from the process running the microservice, rather than all proceses on the server. You can always use more language-specific features to read the shared secret, such a system properties in a JVM, but the important thing is <em>no hard-coding</em>.</li>
<li><em>Transmitting the HMAC over the wire.</em> When an HMAC is generated you are typically left with a series of meaningless bytes. You need to think about if they are going to need to be encoded prior to transmission. Take a HTTP REST call, for example. You&#8217;re going to need to take some extra steps such as base 64 and URL-encoding before invoking the REST end-point. If, however, you are making a call over something that supports binary formats, such as a messaging system, then it may not be necessary to encode the HMAC at all.</li>
</ul>
<p>Finally, you can add whatever additional data you want to your API; there isn&#8217;t a specification to follow, you just need to consider the three security questions posed at the start of this article: who is calling me, do I trust them, and has anything changed in transit?</p>
<h2>An example API key implementation</h2>
<p>In order to illustrate the techniques talked about in this article there is a <a href="https://github.com/WASdev/sample.securems">WAS Liberty sample</a> available. The diagram below shows the overall architecture of the sample, which consists of two Liberty servers, each hosting their own JAX-RS microservice. The configuration is stored in various Liberty server files such as <code>server.xml</code>. The numbers indicate the process flow starting with a client accessing the REST API of microservice 1 and ending with the invocation inside microservice 2. Finally, shared components have the same colour:</p>
<p><a href="../../wp-content/uploads/sites/9/2015/09/SecureMS-APIKeys.png"><br />
<img class="alignnone size-full wp-image-14836" src="../../wp-content/uploads/sites/9/2015/09/SecureMS-APIKeys.png" alt="SecureMS-APIKeys" width="1301" height="656" srcset="../../wp-content/uploads/sites/9/2015/09/SecureMS-APIKeys.png 1301w, ../../wp-content/uploads/sites/9/2015/09/SecureMS-APIKeys-300x151.png 300w, ../../wp-content/uploads/sites/9/2015/09/SecureMS-APIKeys-1024x516.png 1024w" sizes="(max-width: 1301px) 100vw, 1301px" /></a></p>
<p>Let&#8217;s now walk through the flow and see what is happening at each stage, together with some code snippets.</p>
<h3>(1) Client makes a request</h3>
<p>A client makes a request to the REST API of the first microservice; this may be by the actual user or another microservice. Inside the message-handling code, we create a new JAX-RS client with which we are going to invoke the second (remote) microservice. Ideally we want to create this client every time so that we can be stateless, pick up any configuration changes etc.</p>
<pre class="brush: java; title: ; notranslate" title="">
@GET
@Produces(MediaType.TEXT_PLAIN)
public String getMessage() {
	Client client = ClientBuilder.newClient();
</pre>
<h3>(2) Creating the JAX-RS client</h3>
<p>The client needs to know where the remote service is located (remember, no hard-coding) and so retrieves the value from the environment variable which was configured in the Liberty <code>server.env</code> file. The other thing that the client does is configure a JAX-RS client interceptor. This is the APIKey class and its constructor takes a service ID and the name of the environment variable storing the shared secret. This class is going to be responsible for creating the API key that will be used during the call. Splitting this out into a separate class allows us to easily add or remove the use of API keys without having to change the business logic.</p>
<pre class="brush: java; title: ; notranslate" title="">
//register the API key generator for use with the client call
APIKey apikey = new APIKey(SERVICE_ID, SYSPROP_SECRET);
client.register(apikey);
</pre>
<h3>(3) Client generates the API key</h3>
<p>The API key class reads the shared secret from the environment variable specified in the constructor (which has its value set in the Liberty <code>server.env</code> file). It then creates the API key by feeding the query string parameters, service ID, and timestamp into an HMAC generator. The service ID, timestamp, and HMAC are then appended to the URL to be invoked by the JAX-RS client.</p>
<pre class="brush: java; title: ; notranslate" title="">
/*
* Entry point for the client that wants to make a request to a second
* service. It takes the original URI supplied and adds additional query string
* parameters. These are
*
* 1. The service ID supplied by the client
* 2. A timestamp of when the request was made
* 3. A generated API key for this invocation.
*
* @see javax.ws.rs.client.ClientRequestFilter#filter(javax.ws.rs.client.ClientRequestContext)
*/
@Override
public void filter(ClientRequestContext ctx) throws IOException {
	String idparams = Params.serviceID.toString() + serviceID + Params.stamp.toString() + Long.toString(System.currentTimeMillis());
	String apikey = ctx.getUri().getRawQuery() + idparams;
	String hmac = URLEncoder.encode(digest(apikey), CHAR_SET);
	URI uri = URI.create(ctx.getUri().toString() + idparams + Params.apikey.toString() + hmac);
	System.setProperty(SYSPROP_LOGGING, &amp;amp;amp;quot;Outgoing request url : &amp;amp;amp;quot; + uri.toString());
ctx.setUri(uri);
}
</pre>
<h3>(4) Invoke the API</h3>
<p>The JAX-RS client now calls the specified service location using the interceptor modified URL which contains the API key and HMAC.</p>
<pre class="brush: java; title: ; notranslate" title="">
//make the request
String log = &amp;amp;amp;quot;Target set in JAXRS client : &amp;amp;amp;quot; + svcurl + &amp;amp;amp;quot;?id=1&amp;amp;amp;amp;full=truen&amp;amp;amp;quot;;
WebTarget target = client.target(svcurl + &amp;amp;amp;quot;?id=1&amp;amp;amp;amp;full=true&amp;amp;amp;quot;);
Invocation.Builder builder = target.request(MediaType.APPLICATION_JSON);
Response response = builder.build(&amp;amp;amp;quot;GET&amp;amp;amp;quot;).invoke();
String resp = response.readEntity(String.class);
response.close();
</pre>
<h3>(5) Authorising filter</h3>
<p>The same class that was used to alter the outgoing client request can also be deployed as a filter. Obviously it&#8217;s not always possible to use the same class for both services. If you can, however, it makes life easier in terms of controlling what authorisation steps are involved and ensuring that all parties use the same algorithms.</p>
<p>The following code snippet goes through a number of stages as it authorises the request. It starts by checking that we&#8217;ve actually received what we expected in terms of data items, then goes through validating the HMAC, and finally making additional checks using the timestamp. Similar to the client interceptor in step 3, using a filter allows us to secure our service (or change that security) without changing the business logic inside the service.</p>
<pre class="brush: java; title: ; notranslate" title="">
while(!state.equals(AuthenticationState.PASSED)) {
switch(state) {
case hasQueryString : //check that there is a query string which will contain the service ID and api key
	queryString = ((HttpServletRequest) request).getQueryString(); //this is the raw version
	state = (queryString == null) ? AuthenticationState.ACCESS_DENIED : AuthenticationState.hasAPIKeyParam;
break;
case hasAPIKeyParam : //check there is an apikey parameter
	pos = queryString.lastIndexOf(Params.apikey.toString());
	state = (pos == -1) ? AuthenticationState.ACCESS_DENIED : AuthenticationState.isAPIKeyValid;
break;
case isAPIKeyValid : //validate API key against all parameters (except the API key itself)
	queryString = queryString.substring(0, pos); //remove API key from end of query string
	String hmac = request.getParameter(Params.apikey.name());
	apikey = digest(queryString);
	state = !apikey.equals(hmac) ? AuthenticationState.ACCESS_DENIED : AuthenticationState.hasKeyExpired;
break;
case hasKeyExpired : //check that key has not timed out
	time = Long.parseLong(request.getParameter(Params.stamp.name()));
	state = (System.currentTimeMillis() - time) &amp;amp;amp;gt; timeoutMS ? AuthenticationState.ACCESS_DENIED : AuthenticationState.checkReplay;
break;
case checkReplay : //simple replay check - only allows the one time use of API keys, storing time allows expired keys to be purged
	Long value = usedKeys.putIfAbsent(apikey, time);
	state = value != null ? AuthenticationState.ACCESS_DENIED : AuthenticationState.PASSED;
break;
case ACCESS_DENIED :
default :
	((HttpServletResponse)response).sendError(HttpServletResponse.SC_FORBIDDEN);
return;
}
}
</pre>
<h3>(6) Service process the request</h3>
<p>Finally, the service is now invoked (assuming that it has passed the checks in the filter). Depending on your requirements, you can receive the service ID as part of the JAX-RS invocation which then allows you to do additional checking such as validating that the service is entitled to perform the requested operation.</p>
<pre class="brush: java; title: ; notranslate" title="">
@GET
public String getMessage(final @QueryParam(&amp;amp;amp;quot;serviceID&amp;amp;amp;quot;) String svcid, final @QueryParam(&amp;amp;amp;quot;id&amp;amp;amp;quot;) String id) {
	String msg = &amp;amp;amp;quot;Received params : ntserviceID = &amp;amp;amp;quot; + svcid + &amp;amp;amp;quot;ntid = &amp;amp;amp;quot; + id + &amp;amp;amp;quot;nResponse to client : nt&amp;amp;amp;quot;;
/*
* Optionally at this point you would check that the service
* is entitled to make this call
*/
</pre>
<h3>Extending the API key</h3>
<p>The sample API key shows how you can trust and validate incoming requests from other microservices. This is an extensible model in that you can add as many additional data elements to the API key as fits your organisational needs. Alternatively, you can also add in extra security validation steps.</p>
<h2>Summary</h2>
<p>This article has explained the principles behind allowing your microservice to be invoked by other microservices. It has described some of the important security questions that need to be answered and how API keys can help you accomplish this.</p>
<p>However, API keys are only one component of your security toolbox, and generally cannot be used in isolation. Additional steps and techniques need to be employed to establish the identity of the person under which the service is being invoked. Typically, your service is not going to be invoked directly by the user, but by another service acting on behalf of a user. Furthermore, once that has been done you still need to perform validation on the actual input data, such as checking that numbers are really numbers and are within acceptable ranges.</p>
							<footer class="entry-footer" id="doc_author">
								<div class="byline"><div><p class="byline__author"><span class="author vcard">by <a class="url fn n" href="../../blog/author/apilkington/index.html">Adam_P</a></span></p><ul class="byline__social"><li class="byline__social__twitter"><a href="https://www.twitter.com/marknsweep">Twitter</a></li></ul><p class="byline__bio">Adam is WebSphere Liberty developer based in the UK Hursley Lab working in the Microservices team. His current focus is on developing best practices and patterns for WebSphere Liberty in microservice architectures. He is also an IBM Master Inventor. Prior to joining IBM he worked in the UK financial services sector.</p></div></div>							</footer><!-- .entry-footer -->
							
<div id="comments" class="comments-area">

	
			<p class="comments-title ibm-h3 ibm-light">
			1 comment on"Using API keys to secure your microservice"		</p>

		
		<ol class="comment-list">
				<li class="pingback even thread-even depth-1 pn-comment" id="comment-131759">
    	<div class="pn-comment__avatar">
			        </div>
		<div class="pn-comment__comment">
			<div class="pn-comment__author">
        		<span class="pn-comment__authorname"><a href='../../index.html%3Fp=15794.html' rel='external nofollow' class='url'>Secure Microservices: API Keys, Access Tokens, and Signed JWTs - WASdev</a></span> 	         	<a class="pn-comment__meta" href="../../index.html%3Fp=14793.html#comment-131759">
					December 04, 2015	         	</a>
			</div>
			      		<p>[&#8230;] Using API keys to secure your microservice is Adam&#8217;s sample. He explains what API keys are, where they come from, and how they&#8217;re used. [&#8230;]</p>
			<div class="pn-comment__actions">
        		<a rel='nofollow' class='comment-reply-link' href='../../index.html%3Fp=14793.html#comment-131759' onclick='return addComment.moveForm( "comment-131759", "131759", "respond", "14793" )' aria-label='Reply to Secure Microservices: API Keys, Access Tokens, and Signed JWTs - WASdev'>Reply</a>			</div>
     	</div>
    </li>
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
	
	

	<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Join The Discussion <small><a rel="nofollow" id="cancel-comment-reply-link" href="../../index.html%3Fp=14793.html#respond" style="display:none;">Cancel reply</a></small></h3>			<form action="https://developer.ibm.com/wasdev/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
				<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label><br /><textarea id="comment" name="comment" aria-required="true" placeholder="Enter your comments..."></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="ibm-btn-pri ibm-btn-small ibm-btn-blue-50" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='14793' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="5f06aaaa09" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="46"/></p>			</form>
			</div><!-- #respond -->
	</div><!-- #comments -->
											</main><!-- #main -->

			</div>
</div>
<script>
	jQuery(document).ready(function($){
		// return;
		$('.cat-item:has(.children)').addClass('arrowryt');
		$('.current-cat:has(.children)').addClass('arrowdwn');
		$('.current-cat-parent, .current-cat-ancestor').addClass('arrowdwn');
		$('<span class="toggler"></span>').prependTo('.cat-item:has(.children)').click(function(e){
			e.preventDefault();
			e.stopPropagation();
			$(this).parent().toggleClass('arrowdwn');
		});
		$('#pnext_cpt_leftnav .pnext_cpt_leftnav_expand').on('click',function(e){
			e.preventDefault();
			$(this).toggleClass('ibm-chevron-up-link');
			$(this).parents('#pnext_cpt_leftnav__links').toggleClass('menuHide');
		})
	});
</script>



		</div><!-- #content -->
	</div><!-- end of ibm-content-wrapper -->

	<p class="ibm-ind-link ibm-nospacing ibm-icononly ibm-btt-auto ibm-hidden-small">
		<a class="ibm-nospacing ibm-top-link" aria-label="Back to top" href="../../index.html%3Fp=14793.html#top" tabindex="0">Back to top</a>
	</p>

	<footer role="contentinfo" aria-label="IBM" id="themeFooter">
		<div id="boomer-footer" class="boomer_footer_menu"></div>
		<div id="dw-footer" class="ibm-alternate ibm-padding-normal">
			<div class="ibm-columns ibm-padding-bottom-0">
				<div class="ibm-col-1-1">
					<div class="ibm-footer-corporate-links">
						<ul>
              <li><a href="https://developer.ibm.com/feedback/">Contact</a></li>
              <li><a href="https://www.ibm.com/privacy/us/en/">Privacy</a></li>
              <li><a href="https://developer.ibm.com/terms/ibm-developer-terms-of-use/">Terms of use</a></li>
              <li><a href="https://www.ibm.com/accessibility/us/en/">Accessibility</a></li>
              <li class="ibm-feedbacklink"><a href="../../index.html%3Fp=14793.html#">Feedback</a></li>
							<li><a href="https://www.ibm.com/developerworks/secure/report/">Report Abuse</a></li>
              <li id="ibm-truste-cp"><a onclick="truste.eu.clickListener();return false;" href="../../index.html%3Fp=14793.html#">Cookie Preferences</a></li>
          	</ul>
					</div>
					<div id="ibm-footer-locale-selector"></div>
				</div>
			</div>
		</div>
	</footer>
</div><!-- #page -->

<script>
        jQuery(document).ready(function($){
          var dcName = 'wasdev';
          // $('a').each(function(){
          //   if(this.href.match('bluemix.net')){
          //     if(this.search){
          //       this.href = this.href + '&cm_sp=dw-bluemix-_-'+dcName+'-_-devcenter';
          //     }else{
          //       this.href = this.href + '?cm_sp=dw-bluemix-_-'+dcName+'-_-devcenter';
          //     }
          //   }
          // });

          jQuery('a[href*="bluemix.net"]').each(function(){
            if(this.search){
              this.href = this.href + '&cm_sp=dw-bluemix-_-'+dcName+'-_-devcenter';
            }else{
              this.href = this.href + '?cm_sp=dw-bluemix-_-'+dcName+'-_-devcenter';
            }
          });

        });
      </script><link rel='stylesheet' id='pn-doccat-styles-css'  href='../../wp-content/plugins/projectnext-docs-categorical-2/partials/v18/pdc.css' type='text/css' media='all' />
<script type='text/javascript' src='../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js'></script>
<script type='text/javascript' src='../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJava.js'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://developer.ibm.com/wasdev/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "https://developer.ibm.com/wasdev/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript' src='../../wp-content/themes/boomer-v18/js/navigation.js'></script>
<script type='text/javascript' src='../../wp-content/themes/boomer-v18/js/skip-link-focus-fix.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/comment-reply.min.js'></script>
<script type='text/javascript' src='https://www.ibm.com/software/info/js/tactic.js'></script>
<script type='text/javascript' src='https://www.ibm.com/software/info/js/tacticbindlinks.js'></script>
<script type='text/javascript' src='../../wp-content/plugins/page-links-to/js/new-tab.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/wp-embed.min.js'></script>
<script async="async" type='text/javascript' src='../../wp-content/plugins/akismet/_inc/form.js'></script>

<script>
	/* this is where we are going to control the main menu */
	function changeMenu(links) {
		IBMCore.common.module.masthead.editProfileMenu({
			action: "replace",
			links: links
		});
	}

	var setMainMenu = function(){
					var userLinks = [{
				title: "My IBM",
				url: "https://myibm.ibm.com/dashboard/?lnk=mmi"
			},{
				title: "Sign In",
				url: "https://developer.ibm.com/sso/login?d=https%3A%2F%2Fdeveloper.ibm.com%2Fwasdev%2Fdocs%2Fusing-api-keys-secure-microservice&lang=en_US"
			},
			{
				title: "Register",
				url: "https://developer.ibm.com/sso/register?lang=en_US&d=https%3A%2F%2Fdeveloper.ibm.com%2Fwasdev%2Fdocs%2Fusing-api-keys-secure-microservice"
			}];
				changeMenu(userLinks);
	}

	IBMCore.common.module.masthead.subscribe("profileMenuReady", "customjs", setMainMenu);
</script>
<script>
		(function($) {
			$(document).ready(function(){
				/* prevent the # links in the main menu from firing */
				$('.ibm-sitenav-menu-list #primary-menu a').on('click.stopFakeLinks',function(e){
					$this = $(this);
					if($this.attr('href') === "#"){
						return false;
					}
				});

				/* bind the feedback click evnet */
				jQuery('#dw-footer .ibm-feedbacklink a').on("click", function(evt) {
			        evt.preventDefault();
			        var iframeWidth = 970;
			        if (window.innerWidth < 900) {
			            iframeWidth = window.innerWidth - 80
			        }
			        IBMCore.common.widget.surveyccfintercept.initFeedback({
			            survey: {
			                height: 700,
			                id: "web-exp",
			                metaData: "",
			                type: "medallia",
			                width: iframeWidth
			            }
			        })
			   });
				//testing out the alpha helper
				$('[data-alpha]').each(function(i){
					$elm = $(this);
					var bg = $elm.css('backgroundColor').replace(/[rgb(]/g,'').replace(/ /g,'').replace(/[)]/g,'');
					var alpha = $elm.data('alpha')/100;
					$elm.css("cssText", "background-color: rgba("+bg+","+alpha+") !important;");
				})
				//testing out the panel slider
				$('.pn-sliding-panels').each(function(i){
					$elm = $(this);
					//get the width of the active panel
					var activeWidth = $elm.data('openamount'),
						panelCount = $elm.data('panelcount'),
						inactiveWidth = ((100 - activeWidth) / (panelCount-1));
					//set the first slide as active - later, allow it to be set
					$elm.find('.pn-panel').each(function(i,item){
						$panel = $(item);
						$panel.data('closedwidth',inactiveWidth);
						$panel.data('openwidth',activeWidth);
						if(i == 0){
							$panel.addClass('pn-panel__active').css({width:activeWidth+'%'});
						}else{
							$panel.css({width:inactiveWidth+'%'});
						}
					});

					$elm.on('click.slide','.pn-panel',function(e){
						$this = $(this);
						//console.info('clicked')
						if($this.hasClass('pn-panel__active')){
							//allow for the links in the active panel to be clicked
							//console.info('im open, let the links through')
						}else{
							e.preventDefault();
							//set the width of the currently active panel to the closed amount
							var $active = $this.parents('.pn-sliding-panels').find('.pn-panel__active');
								$active.css({width:$active.data('closedwidth')+'%'}).removeClass('pn-panel__active');
							$this.addClass('pn-panel__active').css({width:$this.data('openwidth')+'%'});
						}

					})
				});

			})
		})( jQuery );
	</script>

	
</body>
</html>
