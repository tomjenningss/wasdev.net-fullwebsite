<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Maximise log history on Open Liberty in production - OpenLiberty.io.</title><meta name="description" content="In development, starting a new log file each time the server restarts is great but, in production, you can now disable this behaviour so that you can retain more history in your logs."><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"><link rel="icon" type="image/x-icon" href="https://openliberty.io/favicon.ico"><link type="text/css" rel="stylesheet" href="https://openliberty.io/assets/openliberty-417cdd85f6072483030360356f930c017bd4dcc1f64ab74a65569803624b1b95.css"><link type="text/css" rel="stylesheet" href="https://openliberty.io/assets/coderay-custom-ab54124e3170f1f31f9b8fdd361c302b78a5238d19a86f6c6f34c4688e2e8d35.css"><link type="text/css" rel="stylesheet" href="https://openliberty.io/assets/header-cfe7ef8714fbbd62359ea8e5e9c5c9b8673f6ad390ba49622ead556a69934b8e.css"><link type="text/css" rel="stylesheet" href="https://openliberty.io/assets/post-15d7f1b9ed2f378fef35059bc2db9eb853848dd082ec79feb51cbb8c13253346.css"><link type="text/css" rel="stylesheet" href="https://openliberty.io/assets/header-light-5d7e497a97a9696b4de3d40b5591d7eb36c5d1f479a07fba5ed816e731c5d437.css"> <script>!function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a),s="dataLayer"!=n?"&l="+n:"";m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id="+r+s,g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer","GTM-TKP3KJ7")</script><link rel="canonical" href="index.html"><link rel="alternate" type="application/rss+xml" title="Open Liberty" href="https://openliberty.io/feed.xml"><link href="https://fonts.googleapis.com/css?family=Asap:400,500" rel="stylesheet"><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@OpenLibertyIO"/><meta name="twitter:title" content="Maximise log history on Open Liberty in production - OpenLiberty.io."/><meta name="twitter:description" content="In development, starting a new log file each time the server restarts is great but, in production, you can now disable this behaviour so that you can retain more history in your logs."/><meta name="twitter:image" content="https://openliberty.io/img/twitter_card.jpg"/><meta name="google-site-verification" content="h2P030H9b66CyL1nEmWfrZB8Fr14h9LmVMG7Ur0caBs"/><script async defer src="https://buttons.github.io/buttons.js"></script></head><body> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKP3KJ7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header><nav class="navbar navbar-expand-lg navbar-dark bg-custom"><div id="tablet_nav" class="container"> <a class="navbar-brand" href="https://openliberty.io/" aria-label="Home"> <img id="ol_logo" src="https://openliberty.io/img/docs_openliberty_logo.png" alt="Open Liberty Logo"><p id="ol_nav_title" class="d-lg-none d-xl-none">Open Liberty</p> </a> <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> <img class="close_button" src="https://openliberty.io/img/nav_close_x.svg" alt="close button"> </button></div><div class="collapse navbar-collapse" id="navbarNav"><ul class="navbar-nav"><li class="nav-item"> <a class="nav-link" href="https://openliberty.io/docs">Docs</a></li><li class="nav-item"> <a class="nav-link" href="https://openliberty.io/downloads">Get Started</a></li><li class="nav-item"> <a class="nav-link" href="https://openliberty.io/support">Support</a></li></ul><div id="float_right_section"> <a id="fork_button" class="nav-link" href="https://github.com/OpenLiberty/open-liberty" target="_blank" rel="noopener noreferrer">Fork the code</a></div><div id="header_round_links_container" class="d-lg-none d-xl-none"> <a id="header_twitter_link" class="header_round_btn" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a> <a id="header_stackoverflow_link" class="header_round_btn" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a> <a id="header_groupsio_link" class="header_round_btn" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a></div> <img id="tablet_images" class="d-none d-md-block d-lg-none" src="https://openliberty.io/img/tab_nav_ufoclouds.svg" alt="tab_images"></div> </nav></header><main aria-label="Content"><div id="article_container" class="container-fluid"> <article class="post" aria-label="article"> <header id="post_header"><div class="container"> <a id="blog_link" href="https://openliberty.io/blog"><img id="arrow" src="https://openliberty.io/img/post_arrow.svg" alt="back to all blogs">See all blog posts</a><div class="share_post_container"> <a class="twitter_link" href="https://twitter.com/intent" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent('Maximise log history on Open Liberty in production') + '&amp;url=' + encodeURIComponent(window.location)); return false" aria-label="Twitter link"></a> <a class="reddit_link" href="https://www.reddit.com/submit" onclick="window.open('//www.reddit.com/submit?url=' + encodeURIComponent(window.location)); return false" aria-label="Reddit link"></a></div><h1 id="post_title">Maximise log history on Open Liberty in production</h1><div id="post_information_container"><div class="author_images_container"> <img src="https://avatars3.githubusercontent.com/u/28316667" class="author_image" alt="image of author"></div> <a class="author_name" href="https://github.com/kgibm" target="_blank" rel="noopener noreferrer">Kevin Grigorenko</a> <span id="post_date">on Nov 9, 2018</span></div><div class="post_tags_container"></div></div> </header><div id="article_body" class="container"><div class="paragraph"><p>At startup, Open Liberty starts with a new log file. The latest <a href="https://openliberty.io/downloads/">development builds</a> of Open Liberty introduce a new option to configure Liberty to append to any existing <code>messages.log</code> or <code>trace.log</code> files instead of starting a new log file. This enables you to maximise the log history stored in production.</p></div><div class="paragraph"><p>In development, the default behaviour of starting a new log file each time Open Liberty restarts can be really useful because it makes it really easy to find the log data for the new server run. In production, however, this can make logs more difficult to manage. Liberty rolls (overwrites old log files) when the files reach a certain total size or reach a total a certain number of files. For example, if you have five files of log history that can contain a maximum of 20Mb each, you would expect to have 100Mb of log data but, if you restart the server after 5Mb of data has been logged in each file, the five files would contain a total of only 25Mb of log history before the oldest file is overwritten on the next restart. This could mean losing vital production debug information.</p></div><div class="paragraph"><p>You can disable this default behaviour in production by adding the new option <code>com.ibm.ws.logging.newLogsOnStart=false</code> on a separate line in a <code>bootstrap.properties</code> file (for information on how to create and use the <code>bootstrap.properties</code> file, see <a href="https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/twlp_inst_bootstrap.html" target="_blank" rel="noopener noreferrer">the Liberty Knowledge Center</a>).</p></div><div class="paragraph"><p>If you would like to completely disable roll-over (overwriting of old log files after a certain file size), you can pair the above option with the following option in <code>server.xml</code> which configures an unlimited maximum log file size:</p></div><div class="listingblock"><div class="content"> <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;logging</span> <span class="attribute-name">maxFileSize</span>=<span class="error">“</span><span class="attribute-value">0</span><span class="error">”</span> <span class="tag">/&gt;</span></code></pre></div></div><div class="paragraph"><p>As I said, in development, the default behaviour of rolling the logs after a certain file size is fine. If you’ve moved to production on Open Liberty, take a look at whether this new option to maximise log history is useful to you.</p></div><div class="share_post_container"> <a class="twitter_link" href="https://twitter.com/intent" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent('Maximise log history on Open Liberty in production') + '&amp;url=' + encodeURIComponent(window.location)); return false" aria-label="Twitter link"></a> <a class="reddit_link" href="https://www.reddit.com/submit" onclick="window.open('//www.reddit.com/submit?url=' + encodeURIComponent(window.location)); return false" aria-label="Reddit link"></a></div><div id="blog_link_container"> <a id="blog_link_bottom" href="https://openliberty.io/blog"><img id="arrow" src="https://openliberty.io/img/post_arrow.svg" alt="back to all blogs">See all blog posts</a></div></div><div class="tags_container_bottom"><div class="container"><p id="tags">Tags</p><div class="post_tags_container"></div></div></div> </article></div><div class="d-none"> <img src="https://openliberty.io/img/twitter_link_hover.svg"> <img src="https://openliberty.io/img/reddit_link_hover.svg"></div></main><footer><div id="footer_gray_background"><div id="footer_top_container" class="footer_container container-fluid"><div id="footer_project_container"> <span id="footer_open_liberty"></span><p id="footer_project">an IBM open source project</p></div><div id="footer_round_links_container"> <a id="footer_github_link" class="footer_round_btn" href="https://github.com/OpenLiberty/" target="_blank" rel="noopener noreferrer" aria-label="Github"></a> <a id="footer_twitter_link" class="footer_round_btn" href="https://twitter.com/OpenLibertyIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter"></a> <a id="footer_stackoverflow_link" class="footer_round_btn" href="https://stackoverflow.com/questions/tagged/open-liberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty questions on Stack Overflow"></a> <a id="footer_groupsio_link" class="footer_round_btn" href="https://groups.io/g/openliberty" target="_blank" rel="noopener noreferrer" aria-label="Open Liberty Groups.io"></a></div></div></div><div id="footer_bottom_container" class="footer_container container-fluid"><div id="footer_bottom_left_section"><p id="footer_copyright">© Copyright IBM Corp. 2017, 2019</p><p class="vertical_bar">|</p> <a id="footer_privacy_policy_link" href="https://www.ibm.com/privacy/" target="_blank" rel="noopener noreferrer" class="left_footer_link">Privacy policy</a><p class="vertical_bar">|</p> <a id="footer_license_link" href="https://github.com/OpenLiberty/open-liberty/blob/master/LICENSE" target="_blank" rel="noopener noreferrer" class="left_footer_link">License</a></div><div id="footer_bottom_right_section"> <a id="footer_docs_link" href="https://openliberty.io/docs" aria-label="Open Liberty Docs" class="right_footer_link blue_link_light_background">Docs</a> <a id="footer_blog_link" href="https://openliberty.io/blog" aria-label="Open Liberty Blogs" class="right_footer_link blue_link_light_background">Blog</a> <a id="footer_support_link" href="https://openliberty.io/support" aria-label="Open Liberty Support" class="right_footer_link blue_link_light_background">Support</a></div></div> </footer><div class="d-none hidden"> <img src="https://openliberty.io/img/Footer_GitCat_Hover.svg" alt="OpenLiberty Github link"> <img src="https://openliberty.io/img/Footer_TwitterBird_Hover.svg" alt="OpenLibertyIO Twitter link"> <img src="https://openliberty.io/img/Footer_StackO_Hover.svg" alt="Open-liberty Stack Overflow link"> <img src="https://openliberty.io/img/Footer_GroupsIO_Hover.svg" alt="Openliberty Groups IO link"></div> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script><script src="https://openliberty.io/assets/devEnvironment-1534f5b3d86298872bff0c998dc072080c30665ac1e9f1d3087393aeba41be1b.js"></script><script src="https://openliberty.io/assets/header-d405bd49656b9225ee0406d4235bdb9d94577ed774cccd00b4bf2431152ab70b.js"></script><script src="https://openliberty.io/assets/post-315ec2726897e27cf07b78db43da01eba6bf0d5013f8c9fbd290879fb64388fa.js"></script></body></html>