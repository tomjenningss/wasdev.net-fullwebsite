<!DOCTYPE html>
<html lang="en-US">
<head>
	<!-- SITE MON : START (DO NOT DELETE) -->
	<!-- developerWorks monitoring token -->
	<!-- SITE MON : END (DO NOT DELETE) -->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- v18 meta -->
	<meta name="geo.country" content="ZZ" />
	<meta name="dcterms.rights" content="© Copyright IBM Corp. 2016" />
	<meta name="dcterms.date" content="2016-07-18" />
	<meta name="keywords" content="" />
	<meta name="robots" content="index, follow" />
	<link rel="shortcut icon" href="https://www.ibm.com/favicon.ico" />

		<!-- end of v18 meta -->

<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="https://developer.ibm.com/wasdev/xmlrpc.php">
<script>
		 digitalData = {
		  "page":{
		    "category":{
		      "primaryCategory":"SOFDCWSVZZ",		      "ibm":[

		      ]
		    },
		    "pageInfo":{
		      "effectiveDate":"2016-07-18",
		      "expiryDate":"2020-07-18",
		      "language":"en-US",
		      "publishDate":"2017-06-28",
		      "publisher":"IBM Corporation",
		      "version":"v18",
		      "pageID":"",
		      "ibm":{
						"contentDelivery":"HTML",
		        "contentProducer":"IBM Northstar Template Generator 2.0",
		        "country":"ZZ",
		        "industry":"ZZ",
		        "owner":"Jamie Pickett\/Boulder\/IBM",
		        "siteID":"DWNEXT",
						"subject":"SW700",
		        "type":"SW700",
		        "cmClientID":"50200000| DWNEXT",
		        "encoding":"utf8",
		        "encodingRaw":"utf-8",
		        "title":"How to tell if your app server is sick (new in 17.0.0.2)",
						"contentType": "post",
						"wpid":"9",
						"topics":"",
						"contentArea": "Blog"
		      },
		      "metrics":[

		      ],
		      "keywords":"",
		      "description":"How to tell if your app server is sick (new in 17.0.0.2)"
		    },
		    "attributes":[

		    ],
		  },
		  "event_coordinator":[

		  ],
		  "isLoaded":true,
		  "user":{
		    "profile":[

		    ],
		    "segment":{

		    }
		  }
		};
	 </script>
<title>How to tell if your app server is sick (new in 17.0.0.2) - WASdev</title>

<!-- This site is optimized with the Yoast SEO plugin v9.0.2 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="Liberty provides performance metrics eg db connection pool size, servlet response time, JVM gc time, etc. Understand how your Java app performs on Liberty."/>
<link rel="canonical" href="index.html%3Fp=23025.html" />
<link rel="publisher" href="https://plus.google.com/u/0/+WASdevNet"/>
<!-- / Yoast SEO plugin. -->

<link rel='dns-prefetch' href='https://1.www.s81c.com/' />
<link rel='dns-prefetch' href='https://www.ibm.com/' />
<link rel='dns-prefetch' href='https://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="WASdev &raquo; Feed" href="feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="WASdev &raquo; Comments Feed" href="comments/feed/index.html" />
<meta name="segment" property="developerWorks (developerWorks)" productTitle="developerWorks" value="WASdev (developerWorks)">
<link rel="alternate" type="application/rss+xml" title="WASdev &raquo; How to tell if your app server is sick (new in 17.0.0.2) Comments Feed" href="blog/2017/06/28/how-to-tell-if-your-app-server-is-sick-new-in-17-0-0-2/feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"\/\/dw1.s81c.com\/dw\/wp-includes\/js\/wp-emoji-release.min.js"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='events-manager-css'  href='wp-content/plugins/events-manager/includes/css/events_manager.css' type='text/css' media='all' />
<link rel='stylesheet' id='tab-styles-css'  href='wp-content/plugins/projectnext-shortcodes/tab-styles.css' type='text/css' media='all' />
<link rel='stylesheet' id='cntctfrm_form_style-css'  href='wp-content/plugins/contact-form-plugin/css/form_style.css' type='text/css' media='all' />
<link rel='stylesheet' id='rotatingtweets-css'  href='wp-content/plugins/rotatingtweets/css/style.css' type='text/css' media='all' />
<link rel='stylesheet' id='dwboomer-style-css'  href='wp-content/themes/boomer-v18/style.css' type='text/css' media='all' />
<link rel='stylesheet' id='dashicons-css'  href='wp-includes/css/dashicons.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='pagepost_css-css'  href='wp-content/themes/boomer-v18/css/pagepost.css' type='text/css' media='all' />
<link rel='stylesheet' id='pnext.utils-css'  href='wp-content/themes/boomer-v18/css/pnext.utils.css' type='text/css' media='all' />
<link rel='stylesheet' id='uploaded_css-css'  href='wp-content/uploads/sites/9/2015/03/wasdev.css' type='text/css' media='screen' />
<script type='text/javascript' src='https://1.www.s81c.com/common/v18/js/www.js'></script>
<script type='text/javascript' src='https://1.www.s81c.com/common/v18/js/dyntabs.js'></script>
<script type='text/javascript' src='https://1.www.s81c.com/common/v18/js/masonry.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/core.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/widget.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/position.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/mouse.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/sortable.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/datepicker.min.js'></script>
<script type='text/javascript'>
jQuery(document).ready(function(jQuery){jQuery.datepicker.setDefaults({"closeText":"Close","currentText":"Today","monthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"nextText":"Next","prevText":"Previous","dayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dayNamesShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dayNamesMin":["S","M","T","W","T","F","S"],"dateFormat":"MM d, yy","firstDay":1,"isRTL":false});});
</script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/menu.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/wp-a11y.min.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var uiAutocompleteL10n = {"noResults":"No results found.","oneResult":"1 result found. Use up and down arrow keys to navigate.","manyResults":"%d results found. Use up and down arrow keys to navigate.","itemSelected":"Item selected."};
/* ]]> */
</script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/autocomplete.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/resizable.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/draggable.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/button.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/jquery/ui/dialog.min.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var EM = {"ajaxurl":"https:\/\/developer.ibm.com\/wasdev\/wp-admin\/admin-ajax.php","locationajaxurl":"https:\/\/developer.ibm.com\/wasdev\/wp-admin\/admin-ajax.php?action=locations_search","firstDay":"1","locale":"en","dateFormat":"dd\/mm\/yy","ui_css":"https:\/\/developer.ibm.com\/wasdev\/wp-content\/plugins\/events-manager\/includes\/css\/jquery-ui.min.css","show24hours":"1","is_ssl":"1","txt_search":"Search","txt_searching":"Searching...","txt_loading":"Loading..."};
/* ]]> */
</script>
<script type='text/javascript' src='wp-content/plugins/events-manager/includes/js/events-manager.js'></script>
<script type='text/javascript' src='wp-content/plugins/projectnext-shortcodes/tab-dropdown.js'></script>
<script type='text/javascript' src='wp-content/themes/boomer-v18/js/pnext.utils.js'></script>
<script type='text/javascript' src='https://1.www.s81c.com/common/stats/ida_stats.js'></script>
<link rel='https://api.w.org/' href='wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://developer.ibm.com/wasdev/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.9.9" />
<link rel='shortlink' href='index.html%3Fp=23025.html' />
<link rel="alternate" type="application/json+oembed" href="https://developer.ibm.com/wasdev/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdeveloper.ibm.com%2Fwasdev%2Fblog%2F2017%2F06%2F28%2Fhow-to-tell-if-your-app-server-is-sick-new-in-17-0-0-2%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://developer.ibm.com/wasdev/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdeveloper.ibm.com%2Fwasdev%2Fblog%2F2017%2F06%2F28%2Fhow-to-tell-if-your-app-server-is-sick-new-in-17-0-0-2%2F&#038;format=xml" />
<link rel='https://github.com/WP-API/WP-API' href='https://developer.ibm.com/wasdev/wp-json' />
<style type="text/css" id="syntaxhighlighteranchor"></style>
		<style type="text/css" id="wp-custom-css">
			.videoWrapper {
	position: relative;
	padding-bottom: 56.25%;
/* 16:9 */
	padding-top: 25px;
	height: 0;
}

.videoWrapper iframe {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}

.pnpagepost  .pn-listing .pn-list__item .entry-content .entry-meta .byline br {
	display: none;
}

/*Adds border to any screenshot with this class applied. Looks neater and clearer.*/
img.screenshot {
	border: 1px solid #afafaf;
}

/*Adds border to any photo with this class applied. Looks neater and clearer.*/
img.photo {
	border: 1px solid #afafaf;
}

/*Nests ordered lists correctly.*/
ol>li ol>li::before {
	content: counter(item, lower-alpha)".";
}

ol>li ol>li ol>li::before {
	content: counter(item, lower-roman)".";
}

/* hiding the doubled up author images */
.pn-listing .pn-list__item .byline .avatar {
	display: none !important;
}

/* removing bullets from the EM widget */
.widget-area .widget.widget_em_widget ul li:before,
.widget-area .widget.widget_text ul li:before{display:none;}

/*push anchored h2 headings down from browser top so they're not hidden behind the static headers
h2:before { 
  display: block; 
  content: " "; 
  margin-top: -300px; 
  height: 300px; 
  visibility: hidden; 
}*/

h2 { padding-top: 30px !important; }
		</style>
	
    <link href="https://1.www.s81c.com/common/v18/css/www.css" rel="stylesheet" />
    <link href="https://1.www.s81c.com/common/v18/css/grid-fluid.css" rel="stylesheet">
    <link href="https://1.www.s81c.com/common/v18/css/tables.css" rel="stylesheet">

	<script type="text/javascript">
		 IBMCore.common.util.config.set({
		  "masthead":{
		    "type":"alternate"
		  },
			greeting: { enabled: false },
		  "footer":{
		  	"type":"alternate",
		    "socialLinks":{
		      "enabled":false
		    }
		  },
			survey: { global_percent: 0 }
		});
	 </script>
</head>

<body id="ibm-com" class="post-template-default single single-post postid-23025 single-format-standard ibm-com ibm-type group-blog">
	<div style="display:none"></div>
<!--div id="page" class="site"-->
<div id="ibm-top" class="ibm-landing-page">
	<a class="skip-link screen-reader-text" href="index.html%3Fp=23025.html#main">Skip to content</a>

	<!-- MASTHEAD_BEGIN -->
	<div id="ibm-masthead" role="banner" aria-label="IBM" class="ibm-mhtype-minimal">
		<div id="ibm-mast-options">
			<ul role="toolbar" aria-labelledby="ibm-masthead">
				<li id="ibm-geo" role="presentation">
					<a href="http://www.ibm.com/planetwide/select/selector.html">United States</a>
				</li>
			</ul>
		</div>
		<div id="ibm-universal-nav">
			<div id="ibm-home">
				<a href="http://www.ibm.com/us-en/">IBM¨</a>
			</div>
			<div class="dw-nav-left">
				<a href="http://developer.ibm.com" class="dw-logo"><span>IBM Developer</span></a>
							</div>
			<ul id="ibm-menu-links" role="toolbar" aria-label="Site map" class="ibm-hide">
				<li><a href="http://www.ibm.com/sitemap/us/en/">Site map</a></li>
			</ul>
			<div id="ibm-search-module" role="search" aria-labelledby="ibm-masthead">
				<!-- form id="ibm-search-form" action="http://www.ibm.com/Search/" method="get" -->
				<form id="ibm-search-form" action="https://www.ibm.com/Search/" method="get">
					<p>
						<label for="q"><span class="ibm-access">Search</span></label>
						<input type="text" maxlength="100" value="" name="q" id="q"/>
						<input type="hidden" name="v" value="18" />
						<input type="hidden" name="en" value="utf" />
						<input type="hidden" name="lang" value="en" />
						<input type="hidden" name="cc" value="us" />
						<input type="hidden" name="sn" value="dw" />
						<input type="hidden" name="dw" value="dws" />

						<span class="ibm-search-scope">
							<input type="checkbox" class="ibm-styled-checkbox" name="sn" value="Search standards" checked id="scopeoption">
							<label for="scopeoption">Search WASdev</label>
						</span>

						<input type="submit" id="ibm-search" class="ibm-btn-search" value="Submit"/>
					</p>
				</form>
									<form class="ibm-hide" id="devcenter-search-form" action="index.html%3Fp=719.html" method="get">
						<p>
							<label for="pnext-search-input" class="screen-reader-text">Search</label>
							<input maxlength="100" required aria-required="true" id="q" class="pn-search-input pn-nav-search-input fl" name="q" type="text">
							<input type="submit" id="ibm-search" class="ibm-btn-search" value="Seach"/>
						</p>
					</form>
								</div>
		</div>
	</div>
  <!-- MASTHEAD_END -->
  <div id="ibm-content-wrapper">
  	<header role="banner" aria-labelledby="ibm-pagetitle-h1">
  		<!-- MASTHEAD_SITENAV_BEGIN -->
<div class="ibm-sitenav-menu-container">
  <div class="ibm-sitenav-menu-name">
    <a href="docs/portlet-container-differences-liberty-full-profile/index.html" rel="home">WASdev</a>
  </div>
    <div class="ibm-sitenav-menu-list"><ul id="primary-menu" class="menu"><li id="menu-item-11996" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11996"><a title="About WebSphere Liberty" href="docs/introducing_the_liberty_profile/index.html">About</a></li>
<li id="menu-item-12338" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12338"><a href="getstarted/index.html">Get Started</a></li>
<li id="menu-item-8368" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8368"><a title="Download Liberty, features, and samples" href="downloads/websphere-application-server-migration-tools/index.html">Downloads</a></li>
<li id="menu-item-2816" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2816"><a title="Articles and videos for developers" href="docs.html">Docs</a></li>
<li id="menu-item-12458" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12458"><a title="Open source code on Github" href="https://github.com/wasdev">Source Code</a></li>
<li id="menu-item-718" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-718"><a title="All the ways you can get help developing on Liberty" href="help.html">Get Help</a></li>
<li id="menu-item-2415" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-2415"><a title="News, events, and opinions on WAS Liberty" href="blog.html">News &#038; Events</a></li>
</ul></div></div>
<!-- MASTHEAD_SITENAV_END -->
  	</header>
<style>#ibm-com .gsc-adBlock{display:none !important;}</style>
<div id="content" class="site-content">

	<div id="primary" class="content-area-restricted ibm-fluid pnpagepost">
		<header class="pagepost-entry-header"><div class="pn_categories"><span><b> in</b> <a href="blog/category/blog/index.html" rel="category tag">Blog</a></span></div><h1 class="entry-title">How to tell if your app server is sick (new in 17.0.0.2)</h1><div class="entry-meta"><div class="pn_byline"><br><span class="author vcard"><a class="url fn n" href="blog/author/frowe/index.html">Fred Rowe</a></span><br>Published on June 28, 2017<i> / Updated on July 11, 2017</i></div><div class="pn_slic"><a href="index.html%3Fp=23025.html#comments" class="pn_comments_icon">1 <i>Comments</i></a></div></div></header>			<main id="main" class="site-main " role="main">
				<article id="post-23025" class="post-23025 post type-post status-publish format-standard hentry category-blog">
		<div class="entry-content">
		<p>The <code>monitor-1.0</code> feature in WebSphere Liberty provides performance metrics such as database connection pool size, servlet response time, JVM garbage collection time, and so on. You can use this to understand how your Java application performs on a Liberty server, and administrators can monitor and tune the performance of your application in production.</p>
<h2>Some background</h2>
<p>Traditional WebSphere Application Server (WAS) has long provided a number of performance indicators, or counters, or metrics, as part of the Performance Monitoring Infrastructure (PMI).  For example, PMI provides metrics for database connection pool size, servlet response time, Enterprise JavaBeans (EJB) method response time, Java virtual machine (JVM) garbage collection time, CPU usage, and others. This data can be used to understand the runtime resource utilization patterns of the thread pool, connection pool, and so on, and the performance characteristics of the application components like servlets, JavaServer Pages (JSP), and enterprise beans.  These metrics and counters can be used to monitor the health of the application server and to tune the performance of applications.  Typically, tools gather the values of the desired counters and display those values in some sort of a user interface.  For traditional WAS, most tools gather these metrics through JMX MBeans.</p>
<p>Because of the usefulness of these metrics, Liberty provides similar performance monitoring metrics as part of the <code>monitor-1.0</code> feature.  To find out more about monitoring Liberty servers in general, see the <a href="https://www.ibm.com/support/knowledgecenter/SSEQTP_liberty/com.ibm.websphere.wlp.core.doc/ae/twlp_mon.html">Knowledge Center docs</a>.</p>
<p>Like traditional WAS, Liberty users can either use tools to visualize these metrics, or directly obtain the metrics themselves by invoking the appropriate MBean through JMX. To find out more, see the <a href="https://www.ibm.com/support/knowledgecenter/SSEQTP_liberty/com.ibm.websphere.wlp.core.doc/ae/twlp_admin_jmx.html">Knowledge Center docs</a>.  Unlike traditional WAS, Liberty also allows users (and tools) to obtain these metrics using RESTful interfaces as described in a <a href="index.html%3Fp=10816.html">Accessing Libertyâs JMX REST APIs</a>.</p>
<h2>Why bring this up now?</h2>
<p>The set of metrics provided by Liberty is similar to, but not exactly the same as, the set provided by traditional WAS.  The <code>monitor-1.0</code> feature has been around for a while but, as part of the 17.0.0.2 Liberty release, we addressed a Request For Enhancement (RFE) <a href="http://www.ibm.com/developerworks/rfe/execute?use_case=viewChangeRequest&#038;CR_ID=96544">asking us to provide an additional metric for the <code>ConnectionPoolStats</code> MBean in Liberty that was in traditional WAS</a>.  We do listen to your requests and try to address some of them with each release.</p>
<p>As part of that work, I wanted to take the opportunity to explain how you might start taking advantage of monitoring for Liberty.  Iâll use the new Liberty metric, <code>InUseTime</code>, as an example.  This metric is one of a set of metrics of the <code>ConnectionPoolStats</code> MBean related to JDBC and JCA connection pooling. To find out more about monitoring of Liberty connection pools, see the <a href="https://www.ibm.com/support/knowledgecenter/SSEQTP_liberty/com.ibm.websphere.wlp.core.doc/ae/rwlp_mon_connectionpools.html">Knowledge Center docs</a>.</p>
<h2>Whatâs new?</h2>
<p>Traditional WAS provides a JDBC connection pool counter named <code>UseTime</code>, which is the average time in milliseconds that a JDBC connection is in use.  As part of our on-going effort to ease migration between the two application servers, and in response to the RFE I mentioned earlier, we&#8217;ve added a similar counter named <code>InUseTime</code> to the set of Liberty monitoring metrics.</p>
<p>The name was changed in Liberty to better reflect the usage of the counter.  The <code>InUseTime</code> and <code>UseTime</code> metrics are useful in understanding how quickly (or slowly) database connections are being obtained, used, and returned to the connection pool.  Typically, a lower number is better and indicates that applications shouldnât have to wait very long to obtain a connection from the connection pool.  Using this new metric in conjunction with the other metrics gives a more complete view of the overall health of database connections of the app server.</p>
<p>So, how to access this info?  First, youâll need to add the <code>restConnector-2.0</code> and <code>monitor-1.0</code> features to your Liberty <code>server.xml</code>.  If the monitor feature is not installed on your app server, you can install it by using the command <code>bin/installUtility install monitor-1.0</code> from your Liberty runtime directory.  Youâll also need some sort of application that accesses a database and thus creates a connection pool for the associated data source.  This is necessary because connection pools are lazy by nature and are only created when needed. Once youâve enabled the features listed above and an application is running, you can access the REST interface to the JDBC/JCA connection pool MBean.  For simplicity, Iâm going to use a browser to access the REST interfaces. You can do the same or you can use any other REST client.</p>
<h2>wRESTing Metrics from the Connection Pool</h2>
<p>First, letâs find the URL for the connection pool MBean by listing all of the registered MBeans using this URL:<br />
<code>https://localhost:9443/IBMJMXConnectorREST/mbeans</code></p>
<p>The response is a JSON object that lists all registered MBeans and, if we search that list for <code>ConnectionPoolStats</code> (the object name of the MBean), weâll find a JSON object like this:</p>
<pre>{"objectName":"WebSphere:type=ConnectionPoolStats,name=jdbc/DictionaryDB","className":"com.ibm.ws.connectionpool.monitor.ConnectionPoolStats","URL":"/IBMJMXConnectorREST/mbeans/WebSphere%3Aname%3Djdbc%2FDictionaryDB%2Ctype%3DConnectionPoolStats"}</pre>
<p>If youâre running multiple JDBC applications that access multiple data sources, your JSON response to the query contains multiple objects, one per connection pool or data source.  If so, simply search those results for the JNDI name of your datasource.  For this example, my application uses a data source with a JNDI name of <code>jdbc/DictionaryDB</code>.  The JSON object for your connection pool lists the URL of the REST interface for the connection pool metrics, <code>ConnectionPoolStats</code>. In my example, the URL is <code>https://localhost:9443/IBMJMXConnectorREST/mbeans/WebSphere%3Aname%3Djdbc%2FDictionaryDB%2Ctype%3DConnectionPoolStats</code></p>
<p>The JSON response from that URL gives us a list of fetchable attributes and, since weâre talking about <code>InUseTime</code>, let&#8217;s grab that one from the URL attribute: <code>URL:/IBMJMXConnectorREST/mbeans/WebSphere%3Aname%3Djdbc%2FDictionaryDB%2Ctype%3DConnectionPoolStats/attributes/InUseTime</code></p>
<p>Visiting that URL yields a JSON response that looks something like this:</p>
<pre>{"value":"355.0","type":"java.lang.Double"}</pre>
<p>So, for my sample application, connections from the pool were in use for 355 milliseconds.  Of course, although itâs useful to test drive the REST API from the browser, itâs likely more useful to either use one of the many tools to obtain the metrics, or write a client that can access the REST interfaces and understand the JSON responses.</p>
<h2>Apples and oranges</h2>
<p>As I mentioned earlier, traditional WAS and Liberty share some of the same metrics.  Some of them have the same name; some are slightly different.  The table below compares the set of <code>ConnectionPoolStats</code> MXBean metrics to that of traditional.  To make things easier, for those that are common, even if the name is slightly different, the interpretation of the contents is the same.  There are additional metrics in traditional WAS that are not present in Liberty but, in some cases, the metric can calculated from other existing metrics.  For example, traditional WAS has a metric, <code>PoolSize</code>, that is not in Liberty but a Liberty user can calculate the value through simple subtraction:</p>
<p>pool size = ManagedConnectionCount â FreeConnectionCount</p>
<table>
<caption>Comparison of ConnectionPoolStats MXBean metrics</caption>
<thead>
<tr>
<th>Traditional WAS metric name</th>
<th>Liberty metric name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>CreateCount</td>
<td>CreateCount</td>
<td>The total number of managed connections that have been created since pool creation. </td>
</tr>
<tr>
<td>CloseCount</td>
<td>DestroyCount</td>
<td>The total number of managed connections that have been destroyed since pool creation.</td>
</tr>
<tr>
<td>ManagedConnectionCount</td>
<td>ManagedConnectionCount</td>
<td>The total number of managed connections in the free, shared, and unshared pools.</td>
</tr>
<tr>
<td>WaitTime</td>
<td>WaitTime</td>
<td>The average waiting time in milliseconds until a connection is granted if a connection is not currently available.</td>
</tr>
<tr>
<td>ConnectionHandleCount</td>
<td>ConnectionHandleCount</td>
<td>The number of connections that are in use. This number might include multiple connections that are shared from a single managed connection.</td>
</tr>
<tr>
<td>FreePoolSize</td>
<td>FreeConnectionCount</td>
<td>The number of managed connections in the free pool.</td>
</tr>
<tr>
<td>UseTime</td>
<td>InUseTime</td>
<td>The average time in milliseconds that a connection is in use.</td>
</tr>
</tbody>
</table>
<h2>Summary</h2>
<p>Using the newly added <code>InUseTime</code> metric of the <code>ConnectionPoolStats</code> MXBean as an example, weâve looked at how to retrieve metrics from the Liberty server using the REST interface.  Weâve also compared the available set of metrics between traditional WAS and Liberty app servers and discussed some of the differences.  Hopefully this information will useful in helping you better understand Liberty connection pooling metrics.</p>
<h3>Related articles</h3>
<div class="ibm-fluid pn-grid-listing pn-noimages" >
<div class="ibm-col-12-4 post-1">
<article id="post-20020" class="pn-list__item post-20020 doc type-doc status-publish hentry tag-monitoring doc_categories-java-ee randcolor2">
<div class="entry-content">
<div class="entry-hd-wrap">
<h2 class="entry-title"><a href="index.html%3Fp=20020.html" rel="bookmark">JDBC connection validation and initialization in Liberty</a></h2>
<div class="entry-meta"><span class="byline"> by <span class="author vcard"><a class="url fn n" href="blog/author/frowe/index.html">Fred Rowe</a></span></span> <span class="posted-on"><i>on</i> <span><time class="entry-date published" datetime="">December 14, 2016</time></span></span><span class="pn-categories"><i> in</i> <a href="docs/category/java-ee/index.html" rel="tag">Java EE</a></span></div>
</div>
<p class="exc-content">Use connection validation to check that pooled connections are still valid before using them, and connection initialization to run SQL commands when connections are created.</p>
<p class="pn-readmore"><span class="pn-readmore"><a href="index.html%3Fp=20020.html" title="Continue reading JDBC connection validation and initialization in Liberty">Continue reading <span class="screen-reader-text">JDBC connection validation and initialization in Liberty</span></a></span></p>
</div>
</article>
</div>
<div class="ibm-col-12-4 post-2">
<article id="post-14790" class="pn-list__item post-14790 doc type-doc status-publish hentry doc_categories-coding doc_categories-devops randcolor2">
<div class="entry-content">
<div class="entry-hd-wrap">
<h2 class="entry-title"><a href="index.html%3Fp=14790.html" rel="bookmark">WebSphere Liberty threading (and why you probably don&#8217;t need to tune it)</a></h2>
<div class="entry-meta"><span class="byline"> by <span class="author vcard"><a class="url fn n" href="blog/author/gpicher/index.html">gpicher</a></span></span> <span class="posted-on"><i>on</i> <span><time class="entry-date published" datetime="">September 23, 2015</time></span></span><span class="pn-categories"><i> in</i> <a href="docs/category/coding/index.html" rel="tag">Coding</a>, <a href="docs/category/devops/index.html" rel="tag">DevOps</a></span></div>
</div>
<p class="exc-content">The WebSphere Liberty threading model is completely different from that on WAS traditional. Gary explains the differences and why you (very probably) don't need to tune the thread pool on Liberty.</p>
<p class="pn-readmore"><span class="pn-readmore"><a href="index.html%3Fp=14790.html" title="Continue reading WebSphere Liberty threading (and why you probably don&#8217;t need to tune it)">Continue reading <span class="screen-reader-text">WebSphere Liberty threading (and why you probably don&#8217;t need to tune it)</span></a></span></p>
</div>
</article>
</div>
<div class="ibm-col-12-4 post-3">
<article id="post-13018" class="pn-list__item post-13018 doc type-doc status-publish hentry tag-monitoring doc_categories-coding doc_categories-devops randcolor1">
<div class="entry-content">
<div class="entry-hd-wrap">
<h2 class="entry-title"><a href="index.html%3Fp=13018.html" rel="bookmark">Request timing: Diagnosing slow requests on WAS Liberty</a></h2>
<div class="entry-meta"><span class="byline"> by <span class="author vcard"><a class="url fn n" href="blog/author/venu-madhav/index.html">venumadhav vanagondi</a></span></span> <span class="posted-on"><i>on</i> <span><time class="entry-date published" datetime="">July 2, 2015</time></span></span><span class="pn-categories"><i> in</i> <a href="docs/category/coding/index.html" rel="tag">Coding</a>, <a href="docs/category/devops/index.html" rel="tag">DevOps</a></span></div>
</div>
<p class="exc-content">Request timing is a new Liberty feature which automatically identifies slow and hung requests and provides detailed information to help you find the root cause. This article explains how to use the request timing capability in WAS Liberty to detect and diagnose problems related to slowness of a request.</p>
<p class="pn-readmore"><span class="pn-readmore"><a href="index.html%3Fp=13018.html" title="Continue reading Request timing: Diagnosing slow requests on WAS Liberty">Continue reading <span class="screen-reader-text">Request timing: Diagnosing slow requests on WAS Liberty</span></a></span></p>
</div>
</article>
</div>
</div>
			</div><!-- .entry-content -->
	<footer class="entry-footer">
		<div class="byline"><div><p class="byline__author"><span class="author vcard">by <a class="url fn n" href="blog/author/frowe/index.html">Fred Rowe</a></span></p><ul class="byline__social"></ul><p class="byline__bio">I'm currently the architect of WebSphere Application Server enterprise connectivity (think JDBC, JCA, etc) and for WAS on the IBM i platform.  I've enjoyed the last 15-ish years working on WAS traditional and Liberty.  Prior to architecting for IBM, I worked for a cool start-up on wireless app dev when mobile connectivity was still in it's infancy.  Prior to that, I rode the telecom bubble working on hardware, firmware and software during the phone network digitalization revolution.  When I'm not typing, I'm mountain biking in one of the many mountains or canyons of New Mexico.</p></div></div>	</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<div id="comments" class="comments-area">

	
			<p class="comments-title ibm-h3 ibm-light">
			1 comment on"How to tell if your app server is sick (new in 17.0.0.2)"		</p>

		
		<ol class="comment-list">
				<li class="pingback even thread-even depth-1 pn-comment" id="comment-150462">
    	<div class="pn-comment__avatar">
			        </div>
		<div class="pn-comment__comment">
			<div class="pn-comment__author">
        		<span class="pn-comment__authorname"><a href='index.html%3Fp=22670.html' rel='external nofollow' class='url'>New release: WebSphere Liberty 17.0.0.2 - WASdev</a></span> 	         	<a class="pn-comment__meta" href="index.html%3Fp=23025.html#comment-150462">
					June 28, 2017	         	</a>
			</div>
			      		<p>[&#8230;] users transitioning from traditional WAS to Liberty because it provides similar functionality. See How to tell if your app server is sick (new in 17.0.0.2) for more [&#8230;]</p>
			<div class="pn-comment__actions">
        		<a rel='nofollow' class='comment-reply-link' href='index.html%3Fp=23025.html#comment-150462' onclick='return addComment.moveForm( "comment-150462", "150462", "respond", "23025" )' aria-label='Reply to New release: WebSphere Liberty 17.0.0.2 - WASdev'>Reply</a>			</div>
     	</div>
    </li>
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
	
	

	<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Join The Discussion <small><a rel="nofollow" id="cancel-comment-reply-link" href="index.html%3Fp=23025.html#respond" style="display:none;">Cancel reply</a></small></h3>			<form action="https://developer.ibm.com/wasdev/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
				<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label><br /><textarea id="comment" name="comment" aria-required="true" placeholder="Enter your comments..."></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="ibm-btn-pri ibm-btn-small ibm-btn-blue-50" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='23025' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="21be68c869" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="59"/></p>			</form>
			</div><!-- #respond -->
	</div><!-- #comments -->
			</main><!-- #main -->

				</div><!-- #primary -->




		</div><!-- #content -->
	</div><!-- end of ibm-content-wrapper -->

	<p class="ibm-ind-link ibm-nospacing ibm-icononly ibm-btt-auto ibm-hidden-small">
		<a class="ibm-nospacing ibm-top-link" aria-label="Back to top" href="index.html%3Fp=23025.html#top" tabindex="0">Back to top</a>
	</p>

	<footer role="contentinfo" aria-label="IBM" id="themeFooter">
		<div id="boomer-footer" class="boomer_footer_menu"></div>
		<div id="dw-footer" class="ibm-alternate ibm-padding-normal">
			<div class="ibm-columns ibm-padding-bottom-0">
				<div class="ibm-col-1-1">
					<div class="ibm-footer-corporate-links">
						<ul>
              <li><a href="https://developer.ibm.com/feedback/">Contact</a></li>
              <li><a href="https://www.ibm.com/privacy/us/en/">Privacy</a></li>
              <li><a href="https://developer.ibm.com/terms/ibm-developer-terms-of-use/">Terms of use</a></li>
              <li><a href="https://www.ibm.com/accessibility/us/en/">Accessibility</a></li>
              <li class="ibm-feedbacklink"><a href="index.html%3Fp=23025.html#">Feedback</a></li>
							<li><a href="https://www.ibm.com/developerworks/secure/report/">Report Abuse</a></li>
              <li id="ibm-truste-cp"><a onclick="truste.eu.clickListener();return false;" href="index.html%3Fp=23025.html#">Cookie Preferences</a></li>
          	</ul>
					</div>
					<div id="ibm-footer-locale-selector"></div>
				</div>
			</div>
		</div>
	</footer>
</div><!-- #page -->

<script>
        jQuery(document).ready(function($){
          var dcName = 'wasdev';
          // $('a').each(function(){
          //   if(this.href.match('bluemix.net')){
          //     if(this.search){
          //       this.href = this.href + '&cm_sp=dw-bluemix-_-'+dcName+'-_-devcenter';
          //     }else{
          //       this.href = this.href + '?cm_sp=dw-bluemix-_-'+dcName+'-_-devcenter';
          //     }
          //   }
          // });

          jQuery('a[href*="bluemix.net"]').each(function(){
            if(this.search){
              this.href = this.href + '&cm_sp=dw-bluemix-_-'+dcName+'-_-devcenter';
            }else{
              this.href = this.href + '?cm_sp=dw-bluemix-_-'+dcName+'-_-devcenter';
            }
          });

        });
      </script><script type='text/javascript' src='wp-content/themes/boomer-v18/js/navigation.js'></script>
<script type='text/javascript' src='wp-content/themes/boomer-v18/js/skip-link-focus-fix.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/comment-reply.min.js'></script>
<script type='text/javascript' src='https://www.ibm.com/software/info/js/tactic.js'></script>
<script type='text/javascript' src='https://www.ibm.com/software/info/js/tacticbindlinks.js'></script>
<script type='text/javascript' src='wp-content/plugins/page-links-to/js/new-tab.min.js'></script>
<script type='text/javascript' src='https://dw1.s81c.com/dw/wp-includes/js/wp-embed.min.js'></script>
<script async="async" type='text/javascript' src='wp-content/plugins/akismet/_inc/form.js'></script>

<script>
	/* this is where we are going to control the main menu */
	function changeMenu(links) {
		IBMCore.common.module.masthead.editProfileMenu({
			action: "replace",
			links: links
		});
	}

	var setMainMenu = function(){
					var userLinks = [{
				title: "My IBM",
				url: "https://myibm.ibm.com/dashboard/?lnk=mmi"
			},{
				title: "Sign In",
				url: "https://developer.ibm.com/sso/login?d=https%3A%2F%2Fdeveloper.ibm.com%2Fwasdev%2Fblog%2F2017%2F06%2F28%2Fhow-to-tell-if-your-app-server-is-sick-new-in-17-0-0-2&lang=en_US"
			},
			{
				title: "Register",
				url: "https://developer.ibm.com/sso/register?lang=en_US&d=https%3A%2F%2Fdeveloper.ibm.com%2Fwasdev%2Fblog%2F2017%2F06%2F28%2Fhow-to-tell-if-your-app-server-is-sick-new-in-17-0-0-2"
			}];
				changeMenu(userLinks);
	}

	IBMCore.common.module.masthead.subscribe("profileMenuReady", "customjs", setMainMenu);
</script>
<script>
		(function($) {
			$(document).ready(function(){
				/* prevent the # links in the main menu from firing */
				$('.ibm-sitenav-menu-list #primary-menu a').on('click.stopFakeLinks',function(e){
					$this = $(this);
					if($this.attr('href') === "#"){
						return false;
					}
				});

				/* bind the feedback click evnet */
				jQuery('#dw-footer .ibm-feedbacklink a').on("click", function(evt) {
			        evt.preventDefault();
			        var iframeWidth = 970;
			        if (window.innerWidth < 900) {
			            iframeWidth = window.innerWidth - 80
			        }
			        IBMCore.common.widget.surveyccfintercept.initFeedback({
			            survey: {
			                height: 700,
			                id: "web-exp",
			                metaData: "",
			                type: "medallia",
			                width: iframeWidth
			            }
			        })
			   });
				//testing out the alpha helper
				$('[data-alpha]').each(function(i){
					$elm = $(this);
					var bg = $elm.css('backgroundColor').replace(/[rgb(]/g,'').replace(/ /g,'').replace(/[)]/g,'');
					var alpha = $elm.data('alpha')/100;
					$elm.css("cssText", "background-color: rgba("+bg+","+alpha+") !important;");
				})
				//testing out the panel slider
				$('.pn-sliding-panels').each(function(i){
					$elm = $(this);
					//get the width of the active panel
					var activeWidth = $elm.data('openamount'),
						panelCount = $elm.data('panelcount'),
						inactiveWidth = ((100 - activeWidth) / (panelCount-1));
					//set the first slide as active - later, allow it to be set
					$elm.find('.pn-panel').each(function(i,item){
						$panel = $(item);
						$panel.data('closedwidth',inactiveWidth);
						$panel.data('openwidth',activeWidth);
						if(i == 0){
							$panel.addClass('pn-panel__active').css({width:activeWidth+'%'});
						}else{
							$panel.css({width:inactiveWidth+'%'});
						}
					});

					$elm.on('click.slide','.pn-panel',function(e){
						$this = $(this);
						//console.info('clicked')
						if($this.hasClass('pn-panel__active')){
							//allow for the links in the active panel to be clicked
							//console.info('im open, let the links through')
						}else{
							e.preventDefault();
							//set the width of the currently active panel to the closed amount
							var $active = $this.parents('.pn-sliding-panels').find('.pn-panel__active');
								$active.css({width:$active.data('closedwidth')+'%'}).removeClass('pn-panel__active');
							$this.addClass('pn-panel__active').css({width:$this.data('openwidth')+'%'});
						}

					})
				});

			})
		})( jQuery );
	</script>

	
</body>
</html>
