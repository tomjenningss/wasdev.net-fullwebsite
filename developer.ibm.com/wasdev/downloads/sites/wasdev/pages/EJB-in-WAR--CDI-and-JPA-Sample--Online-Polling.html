<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
<title>
EJB in WAR, CDI and JPA Sample: Online Polling | IBM WebSphere Liberty Repository | WASdev
</title>
<link href="css/marketplace.css%3F_1416284010" rel="stylesheet" type="text/css">
<link rel="schema.DC" href="http://purl.org/DC/elements/1.0/"/>
<link rel="shortcut icon" href="../../../../wp-content/themes/projectnext/css/favicon.ico" />
<meta name="DC.Rights" content="? Copyright IBM Corporation 2016"/>
<meta name="Keywords" content="IBM WebSphere Liberty Repository, IBM Marketplace, wasdev, wasdev community, WebSphere Application Server, download, JazzHub "/>
<meta name="DC.Date" scheme="iso8601" content="2016-10-25"/>
<meta name="Source"  content="developerWorks"/>
<meta name="Security" content="Public"/>
<meta name="Abstract" content="The following sample provides an application consisting of a servlet, stateless session bean, a JSP, two JPA entities, and an interceptor."/>
<meta name="Description" content="The following sample provides an application consisting of a servlet, stateless session bean, a JSP, two JPA entities, and an interceptor."/>
<meta name="IBM.Effective" scheme="W3CDTF" content="2016-10-25"/>
<meta name="Owner" content="developerWorks Content/Raleigh/IBM"/>
<meta name="DC.Language" scheme="rfc1766" content="en"/>
<meta name="IBM.SpecialPurpose" content="SP001"/>
<meta name="IBM.Country" content="ZZ"/>
<meta name="Robots" content="index,follow"/>
<meta name="DC.Type" scheme="IBM_ContentClassTaxonomy" content="CT801" />
<meta name="DC.Subject" scheme="IBM_SubjectTaxonomy" content="ZZ999" />
<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
</head>

<body>
<div id="eLoader"></div>
<div id="eMain">
<h1>EJB in WAR, CDI and JPA Sample: Online Polling</h1>
<div id="description">
<div id="ibm-wasdev-sample-desc-content"> 
 <p>This sample is a single WAR module that provides two user interface views. </p>
 <ol> 
  <li>An online polling view that displays a question, a list of answers to choose from, and current voting results.</li> 
  <li>An administration view that provides options for voting data to be initialized (empty, default seed data, or from the database if it has been populated). The administration view is always shown on startup, to allow an initialization preference to be set. It can always be returned to by clicking the &quot;Admin&quot; button from the online polling view.</li> 
 </ol> This sample demonstrates the technologies of packaging an EJB in a WAR, Contexts and Dependency Injection (CDI), and Java Persistence API (JPA). The application consists of a servlet, stateless session bean, a JSP, two JPA entities, and an interceptor. The servlet uses CDI annotations to inject the stateless session bean, and then call various business methods declared by the bean. The stateless session bean (PollBean) uses a JPA EntityManager to perform queries and updates to the database. Before the bean populates the database, the interceptor (PollInterceptorImpl) uses a JPA EntityManager to clear the database. Finally, the servlet includes a small JSP to demonstrate CDI, by referencing the stateless session bean from within an EL expression to generate output.
 <p></p> 
 <p id="ibm-wasdev-supported-runtime-content"> This sample can be installed onto runtime versions 8.5.5.0 and later. </p> 
</div> 
<h2 id="ibm-wasdev-sample-installation-title">Installation Instructions</h2> 
<div id="ibm-wasdev-sample-installation-content"> 
 <p>Online installation (requires 8.5.5.6 or later):</p> 
 <ol> 
  <li>Install the sample by running the command below from the bin directory of your server installation: <pre>installUtility install OnlinePollingSample</pre> </li> 
 </ol> 
 <p> Any missing features required by the server will be installed for you. </p> 
 <p>Offline installation:</p> 
 <ol> 
  <li>Download the <code>OnlinePollingSample.jar</code> using the download button at the top of the page and place it in the root of your server installation. </li> 
  <li>Extract the sample into the Liberty installation by running the command below from the root of your server installation: <pre>java -jar OnlinePollingSample.jar</pre> </li> 
 </ol> 
 <p> Any missing features required by the server will need to be installed separately. </p> 
</div> 
<h2 id="ibm-wasdev-sample-instructions-title">Running The Application</h2> 
<div id="ibm-wasdev-sample-instructions-content"> 
 <ol> 
  <li>Start the OnlinePollingSample server by running the command 'bin/server run OnlinePollingSample' from the root of the Liberty profile installation, and confirm the application started by looking in the console output: <pre>CWWKZ0001I: Application OnlinePollingSampleWeb started in XX.XX seconds.</pre> </li> 
  <li>In your browser, enter the URL for the application: <a href="http://localhost:9123/OnlinePollingSampleWeb/">http://localhost:9123/OnlinePollingSampleWeb/ </a> (where port 9123 assumes the httpEndpoint provided in the sample server.xml has not been modified).</li> 
  <li>In your browser, you should see the message: <pre>Please select one of the options below.</pre> This is the administration view.</li> 
  <li>To vote simply select the radio button of the appropriate answer and clicks &quot;Vote!&quot;. The page will automatically be refreshed to display the latest voting results, and automatically commits the voting results to the database with each vote.</li> 
  <li>After selecting how to initialized the voting data from the administration screen, the online polling view will appear.</li> 
 </ol> 
</div> 
<h2 id="ibm-wasdev-sample-notes-title">Notes</h2> 
<div id="ibm-wasdev-sample-notes-content"> 
 <p>The <code>OnlinePollingSampleWeb.war</code> file contains the source and binaries for the application, and can be used to import it to Eclipse. </p> 
 <p>This sample does not include the open source dependencies. The installer will provide a list of the open source pre-requisite libraries and where they can be downloaded from. To help obtaining these libraries, the installer provides the option to download them on your behalf.</p> 
</div> 
<h2 id="ibm-wasdev-sample-stucture-title">Sample Structure</h2> 
<div id="ibm-wasdev-sample-structure-content"> 
 <ul class="structureitem"> 
  <li class="directory" title="">wlp</li> 
  <ul class="structureitem"> 
   <li class="directory" title="">usr</li> 
   <ul class="structureitem"> 
    <li class="directory" title="">servers</li> 
    <ul class="structureitem"> 
     <li class="directory" title="">OnlinePollingSample</li> 
     <ul class="structureitem"> 
      <li class="file" title="File: Included in Archive">Copyright.txt</li> 
      <li class="directory" title="">dropins</li> 
      <ul class="structureitem"> 
       <li class="file" title="File: Included in Archive">OnlinePollingSampleWeb.war</li> 
      </ul> 
      <li class="directory" title="">lafiles</li> 
      <ul class="structureitem"> 
       <li class="file" title="File: Included in Archive">LA_en</li> 
       <li class="file" title="File: Included in Archive">LI_en</li> 
      </ul> 
      <li class="file" title="File: Included in Archive">readme.html</li> 
      <li class="file" title="File: Included in Archive">server.xml</li> 
     </ul> 
    </ul> 
    <li class="directory" title="">shared</li> 
    <ul class="structureitem"> 
     <li class="directory" title="">config</li> 
     <ul class="structureitem"> 
      <li class="file" title="File: Included in Archive">OnlinePollingSampleDerbyLibs.xml</li> 
     </ul> 
     <li class="directory" title="">resources</li> 
     <ul class="structureitem"> 
      <li class="directory" title="">OnlinePollingSampleDerbyLibs</li> 
      <ul class="structureitem"> 
       <li class="external" title="External Dependency: http://repo1.maven.org/maven2/org/apache/derby/derby/10.10.1.1/derby-10.10.1.1.jar">derby-10.10.1.1.jar</li> 
      </ul> 
     </ul> 
    </ul> 
   </ul> 
  </ul> 
 </ul> 
</div>
</div>
</div>
<div style="display:none">
<script>$( document ).ready(function() {
	$('#eLoader').height($(window).height());
    setTimeout(function(){
		location.href='https://developer.ibm.com/wasdev/downloads/#asset/samples-EJB_in_WAR_CDI_and_JPA_Sample_Online_Polling';
	},100);
});
</script>
</div>
</body>

</html>
